<!DOCTYPE html>
<html>
<head>

	<title>Jockey</title>
	<link rel="stylesheet" href="css/style.css" type="text/css">

	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
	<meta content="utf-8" http-equiv="encoding">

	<!-- Behavioral Meta Data -->
	<meta name="theme-color" content="#06D6A0">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="android-mobile-web-app-capable" content="yes">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

	<link rel="icon" type="image/png" href="img/favicon/favicon-32x32.png" sizes="32x32" />
	<link rel="icon" type="image/png" href="img/favicon/favicon-16x16.png" sizes="16x16" />

	<script type="text/javascript" src="https://code.jquery.com/jquery-1.8.3.min.js"></script>
	<script type="text/javascript" src="js/jquery-ui.js"></script>
	<script type="text/javascript" src="js/soundcloud.player.api.js"></script>
	<script type="text/javascript" src="js/sc-player.js"></script>

	<script src='http://modernizr.com/downloads/modernizr-latest.js'></script>
  	<script src='js/jquery-scrollable.js'></script>
	<script type="text/javascript" src='js/jquery.adaptive-backgrounds.js'></script>
	<script type="text/javascript">

		jQuery(function($) {
	      if (!Modernizr.touch) { // if not a smartphone
	        debiki.Utterscroll.enable();
	      }
	    });

		function resizeArtwork() {
			var containerWidth = $(".sc-player li.active").width();
			var containerHeight = $(".sc-player li.active").height();
			if (containerWidth > containerHeight) {
				$(".sc-player li.active img").addClass("bgheight");
				$(".sc-player li.active img").removeClass("bgwidth");
			} else {
				$(".sc-player li.active img").addClass("bgwidth");
				$(".sc-player li.active img").removeClass("bgheight");
			}
		}

		function getImgColor(callback) {
			$(".sc-player li.active img").attr("data-adaptive-bg", "1");
			$(".sc-player li.active img").attr("crossOrigin", "");
			callback();
		}

		function getColor() {
			var defaults = {
				selector:             '[data-adaptive-bg="1"]',
				parent:               '#player-container',
			};
			$.adaptiveBackground.run(defaults);
			if ($('#player-container').css('background-color;') == 'rgb(0, 0, 0)') {
				$.adaptiveBackground.run(defaults);
			}
		}

		function centerNumbers(duration) {
			var scrollMiddle = $(".number-container li.my-score").offset().left - ($(window).width()/2) + ($(".number-container li.my-score").width()/2) + 15;
			$('#draggable').animate({
		        scrollLeft: scrollMiddle,
		        opacity: 1
		    }, duration, "easeOutCubic");
		}

		window.onload = function () {
			resizeArtwork();
			getImgColor(function() {
		     	getColor();
		     });
			centerNumbers(1000);

			$('#minimize-icon').click(function() {
				$('#player-container').toggleClass('minimized');
			});	
		}

		$(window).resize(function() {
			resizeArtwork();
			centerNumbers(0);
		});

	</script>

</head>

<body>
	<div class="scroll-hack"></div>
	<div class="top-stripe brand-color"></div>

	<div id="player-container">
		<div id="bg-overlay">
			<span></span>
		</div>
		<div id="sound-icon">
			<span></span>
		</div>
		<div id="minimize-icon">
			<span></span>
		</div>

		<div class="sc-player">
			<a href="https://soundcloud.com/tycho/a-walk" class="sc-player"></a>
		</div>

		<div class="hip-box">
			<div class="score-lable top">Score</div>
			<div class="score-lable bottom">/10</div>
		</div>

		<div class="number-container">
			<div id="draggable">
				<ol>
					<li id="first-empty"></li>
					<li><span></span></li>						<!-- 1 -->
					<li><span></span></li>						<!-- 2 -->
					<li><span></span></li>						<!-- 3 -->
					<li><span></span></li>						<!-- 4 -->
					<li class="my-score"><span></span></li>		<!-- 5 -->
					<li><span></span></li>						<!-- 6 -->
					<li><span></span></li>						<!-- 7 -->
					<li><span></span></li>						<!-- 8 -->
					<li><span></span></li>						<!-- 9 -->
					<li><span></span></li>						<!-- 10 -->
					<li id="last-empty"></li>
				</ol>
			</div>
		</div>

		<div class="hip-box above"></div>
	</div>

	<script src='js/debiki-utterscroll.js'></script>
</body>
</html>